/****************************************************************************
			*****************************************************************************
			********                      GLOBAL VARIABLES                       ********
			*****************************************************************************
			****************************************************************************///main global variables
function init(){scene.add(camera);scene.fog=new THREE.Fog(0,1800,3e3);renderer.setSize(WIDTH,HEIGHT);document.body.appendChild(renderer.domElement);window.addEventListener("resize",onWindowResize,!1);for(var e=0;e<45;e++){var t=Math.floor(Math.random()*360),n=Math.floor(Math.random()*9)+4;person[e]=new sphere("some person",n,t,0,0,0)}setupRelationshipLines();positionSpheres();document.addEventListener("mousedown",onDocumentMouseDown,!1);postProcessing()}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight)}function postProcessing(){renderPass=new THREE.RenderPass(scene,camera);copyPass=new THREE.ShaderPass(THREE.CopyShader);vignettePass=new THREE.ShaderPass(THREE.VignetteShader);vignettePass.uniforms.darkness.value=1.5;composer=new THREE.EffectComposer(renderer);composer.addPass(renderPass);composer.addPass(vignettePass);composer.addPass(copyPass);copyPass.renderToScreen=!0}function addlight(){var e=new THREE.PointLight(16777215);e.position.x=10;e.position.y=50;e.position.z=130;scene.add(e);scene.add(new THREE.AmbientLight(14272089));var t=new THREE.DirectionalLight(16777215,.55,500);scene.add(t);var n=new THREE.DirectionalLight(16777215,.25,500);n.position.set(0,0,1).normalize();scene.add(n)}function addGrid(){plane=new THREE.Mesh(new THREE.PlaneGeometry(3e3,3e3,20,20),new THREE.MeshLambertMaterial({ambient:197379,color:3355443,shading:THREE.FlatShading,transparent:!1,wireframe:!1,blending:THREE.AdditiveBlending}));plane.rotation.x=-Math.PI/2;plane.position.y=-50;scene.add(plane);for(var e=0;e<441;e++){var t=Math.floor(Math.random()*400-600);plane.geometry.vertices[e].z=t}}function sphere(e,t,n,r,i,s){this.sId=e;this.sRadius=t;this.sAngle=n;this.sX=r;this.sX=i;this.sX=s;var o=new THREE.MeshLambertMaterial({ambient:16777215,color:16777215,specular:0,shininess:0,shading:THREE.FlatShading,opacity:1,transparent:!0}),u=new THREE.SphereGeometry(t,6,6);this.sphere=new THREE.Mesh(u,o);this.sphere.position.x=r;this.sphere.position.y=i;this.sphere.position.z=s;scene.add(this.sphere)}function positionSpheres(){var e=new Array;for(var t=0;t<person.length;t++){var n=0;for(var r=0;r<person.length;r++)t!=r&&person[t].sRadius<person[r].sRadius&&n++;e[n]=person[t];fromPosX=person[t].sphere.position.x;fromPosY=0;fromPosZ=person[t].sphere.position.z;toPosX=positionSphereX(n,person[t].sAngle);toPosY=0;toPosZ=positionSphereZ(n,person[t].sAngle);setupTween(person[t],fromPosX,fromPosY,fromPosZ,toPosX,toPosY,toPosZ)}}function positionSphereX(e,t){hyp=e*(800/person.length);return Math.cos(t)*hyp}function positionSphereZ(e,t){hyp=e*(800/person.length);return Math.sin(t)*hyp}function line(e,t,n){this.sphereA=e;this.sphereB=t;var r=new THREE.Vector3(e.sphere.position.x,e.sphere.position.y,e.sphere.position.z),i=new THREE.Vector3(t.sphere.position.x,t.sphere.position.y,t.sphere.position.z),s=new THREE.Geometry;s.vertices.push(r);s.vertices.push(i);s.verticesNeedUpdate=!0;var o=new THREE.LineBasicMaterial({color:16777215,transparent:!0,opacity:n,linewidth:1});this.line=new THREE.Line(s,o);this.line.geometry.verticesNeedUpdate=!0;scene.add(this.line)}function updateSphereRadius(){for(var e=0;e<person.length;e++){var t=person[e].sId,n=person[e].sRadius,r=person[e].sAngle,i=person[e].sphere.position.x,s=person[e].sphere.position.y,o=person[e].sphere.position.z,u=Math.floor(Math.random()*2),n;u==0?n=person[e].sRadius+1:n=person[e].sRadius-1;n<1&&(n=1);scene.remove(person[e].sphere);person[e]=new sphere(t,n,r,i,s,o)}for(var e=0;e<relationship.length;e++)scene.remove(relationship[e].line);setupRelationshipLines();positionSpheres()}function setupRelationshipLines(){var e=0;for(var t=person.length-1;t>0;t--)for(var n=t-1;n>=0;n--){var r=Math.random();relationship[e]=new line(person[t],person[n],r);e++}}function setupTween(e,t,n,r,i,s,o){var u=function(){e.sphere.position.x=a.x;e.sphere.position.y=a.y;e.sphere.position.z=a.z},a={x:t,y:n,z:r},f=TWEEN.Easing.Quintic.EaseInOut,l=(new TWEEN.Tween(a)).to({x:i,y:s,z:o},tweenDuration).delay(tweenDelay).easing(f).onUpdate(u).start()}function updateRelationshipVertices(){for(var e=0;e<relationship.length;e++){var t=relationship[e].sphereA.sphere.position,n=relationship[e].sphereB.sphere.position;relationship[e].line.geometry.vertices[0].set(t.x,t.y,t.z);relationship[e].line.geometry.vertices[1].set(n.x,n.y,n.z);relationship[e].line.geometry.verticesNeedUpdate=!0}}function onDocumentMouseDown(){TWEEN.removeAll();updateSphereRadius()}function animate(e){var t=Date.now()*2e-4;if(rotate){camera.position.x=Math.cos(t)*1500;camera.position.z=Math.sin(t)*1500}updateRelationshipVertices();camera.lookAt(scene.position);renderer.render(scene,camera);requestAnimationFrame(animate);TWEEN.update();composer.render(.1)}var WIDTH=window.innerWidth,HEIGHT=window.innerHeight,VIEW_ANGLE=45,ASPECT=WIDTH/HEIGHT,NEAR=.1,FAR=1e4,renderer=new THREE.WebGLRenderer,camera=new THREE.PerspectiveCamera(VIEW_ANGLE,ASPECT,NEAR,FAR);camera.position.set(0,600,0);var rotate=!0,scene=new THREE.Scene,person=new Array,relationship=new Array,sphereLocations=new Array,tweenDuration=2500,tweenDelay=0,text,parent;init();addlight();addGrid();animate();