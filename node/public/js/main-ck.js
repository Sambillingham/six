(function(){function I(){t.add(e);t.fog=new THREE.Fog(0,1800,3e3);n.setSize(T,N);document.body.appendChild(n.domElement);window.addEventListener("resize",q,!1);M[0]=new V("GOLD",13812354,40,0,0,0);M[1]=new V("GREEN",65280,44,0,0,0);M[2]=new V("RED",16711680,36,0,0,0);M[3]=new V("BLUE",255,50,0,0,0);console.log(b[0].max,b[1].max,b[2].max,b[3].max);_[0]=new J(M[0],M[1]);_[1]=new J(M[0],M[2]);_[2]=new J(M[0],M[3]);_[3]=new J(M[1],M[2]);_[4]=new J(M[1],M[3]);_[5]=new J(M[2],M[3]);D[0]=new X(0,0,0);D[1]=new X(200,60,0);D[2]=new X(-70,300,0);D[3]=new X(-320,-350,0);Q();R()}function q(){e.aspect=window.innerWidth/window.innerHeight;e.updateProjectionMatrix();n.setSize(window.innerWidth,window.innerHeight)}function R(){renderPass=new THREE.RenderPass(t,e);copyPass=new THREE.ShaderPass(THREE.CopyShader);vignettePass=new THREE.ShaderPass(THREE.VignetteShader);vignettePass.uniforms.darkness.value=1.5;composer=new THREE.EffectComposer(n);composer.addPass(renderPass);composer.addPass(vignettePass);composer.addPass(copyPass);copyPass.renderToScreen=!0}function U(){var e=new THREE.PointLight(16777215);e.position.x=10;e.position.y=50;e.position.z=130;t.add(e);t.add(new THREE.AmbientLight(16750848));var n=new THREE.DirectionalLight(16777215,.55,500);t.add(n);var r=new THREE.DirectionalLight(16777215,.25,500);r.position.set(0,0,1).normalize();t.add(r)}function z(){plane=new THREE.Mesh(new THREE.PlaneGeometry(3e3,3e3,20,20),new THREE.MeshBasicMaterial({ambient:197379,color:13421772,shading:THREE.FlatShading,opacity:.2,transparent:!0,wireframe:!1,blending:THREE.AdditiveBlending}));plane.rotation.x=-Math.PI/2;plane.position.y=-50;t.add(plane);for(var e=0;e<441;e++){var n=Math.floor(Math.random()*400-600);plane.geometry.vertices[e].z=n}}function W(){var e="Phil",n=document.location.hash.substr(1);n.length!==0&&(e=n);var r=new THREE.TextGeometry(e,{size:30,height:20,curveSegments:2,font:"helvetiker"});r.computeBoundingBox();var i=-0.5*(r.boundingBox.max.x-r.boundingBox.min.x),s=new THREE.MeshBasicMaterial({color:16777215,overdraw:!0,shading:THREE.FlatShading});B=new THREE.Mesh(r,s);B.position.x=Math.cos(i);B.position.y=60;B.position.z=Math.sin(i);F=new THREE.Object3D;F.add(B);t.add(F)}function X(e,t,n){this.x=e;this.y=t;this.z=n}function V(e,n,r,i,s,o){this.sId=e;this.sColor=n;this.sRadius=r;var u=new THREE.MeshLambertMaterial({ambient:16777215,color:n,specular:0,shininess:0,shading:THREE.FlatShading,opacity:1,transparent:!0}),a=new THREE.SphereGeometry(r,16,16);this.sphere=new THREE.Mesh(a,u);this.sphere.position.x=i;this.sphere.position.y=s;this.sphere.position.z=o;t.add(this.sphere)}function J(e,n){this.sphereA=e;this.sphereB=n;var r=new THREE.Vector3(e.sphere.position.x,e.sphere.position.y,e.sphere.position.z),i=new THREE.Vector3(n.sphere.position.x,n.sphere.position.y,n.sphere.position.z),s=new THREE.Geometry;s.vertices.push(r);s.vertices.push(i);s.verticesNeedUpdate=!0;var o=new THREE.LineBasicMaterial({color:16750848,opacity:.5,linewidth:5});this.line=new THREE.Line(s,o);this.line.geometry.verticesNeedUpdate=!0;t.add(this.line)}function K(){for(var e=0;e<M.length;e++){var n=M[e].sId,r=M[e].sColor,i=Math.floor(Math.random()*2),s;i==0?s=b[e].max+3:s=b[e].max-3;console.log(b[0].max,b[1].max,b[2].max,b[3].max);var o=M[e].sphere.position.x,u=M[e].sphere.position.y,a=M[e].sphere.position.z;t.remove(M[e].sphere);M[e]=new V(n,r,s,o,u,a)}t.remove(_[0].line);t.remove(_[1].line);t.remove(_[2].line);t.remove(_[3].line);t.remove(_[4].line);t.remove(_[5].line);_[0]=new J(M[0],M[1]);_[1]=new J(M[0],M[2]);_[2]=new J(M[0],M[3]);_[3]=new J(M[1],M[2]);_[4]=new J(M[1],M[3]);_[5]=new J(M[2],M[3])}function Q(){for(var e=0;e<M.length;e++){M[e].sphere.position.x=D[e].x;M[e].sphere.position.y=D[e].y;M[e].sphere.position.z=D[e].z}}function G(){var e=new Array;for(var t=0;t<M.length;t++){var n=0;for(var r=0;r<M.length;r++)M[r].sRadius>M[t].sRadius?n++:M[r].sRadius==M[t].sRadius&&r>t&&n++;e[t]=n}for(var t=0;t<M.length;t++){var i=e[t],s=M[t],o=s.sphere.position.x,u=s.sphere.position.y,a=s.sphere.position.z,f=D[i].x,l=D[i].y,c=D[i].z;Y(s,o,u,a,f,l,c)}}function Y(e,t,n,r,i,s,o){var u=function(){e.sphere.position.x=a.x;e.sphere.position.y=a.y;e.sphere.position.z=a.z},a={x:t,y:n,z:r},f=TWEEN.Easing.Quintic.EaseInOut,l=(new TWEEN.Tween(a)).to({x:i,y:s,z:o},P).delay(H).easing(f).onUpdate(u).start()}function Z(){for(var e=0;e<_.length;e++){var t=_[e].sphereA.sphere.position,n=_[e].sphereB.sphere.position;_[e].line.geometry.vertices[0].set(t.x,t.y,t.z);_[e].line.geometry.vertices[1].set(n.x,n.y,n.z);_[e].line.geometry.verticesNeedUpdate=!0}}function et(){TWEEN.removeAll();K();G();y=!1;tt()}function tt(){setTimeout(function(){y=!0},2e3)}function nt(r){var i=Date.now()*2e-4;if(O){e.position.x=Math.cos(i)*1500;e.position.z=Math.sin(i)*1500}Z();e.lookAt(t.position);n.render(t,e);requestAnimationFrame(nt);TWEEN.update();composer.render(.1)}var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m=0,g=0,y=!0,b=[{id:0,max:0},{id:1,max:0},{id:2,max:0},{id:3,max:0}],w=[{conId:1,relationship:0},{conId:2,relationship:0},{conId:3,relationship:0},{conId:4,relationship:0},{conId:5,relationship:0},{conId:6,relationship:0}],E="",S={};maxConnection={};var x=io.connect("http://178.79.132.119");x.on("relationshipConnections",function(e){S=e;for(var t=1;t<7;t++)if(S.conId===t){j=t-1;w[j].conId=S.conId;w[j].relationship=S.relationship;$("#rel"+t).html("Relationship ID "+t+"'s connection is "+S.relationship)}});x.on("maxConnection",function(e){maxConnection=e;for(var t=0;t<4;t++)if(maxConnection.id===t){b[t].id=maxConnection.id;b[t].max=maxConnection.max;y===!0&&et();$("#user"+t).html("Max Connection for ID "+t+" = "+maxConnection.max)}});setTimeout(function(){console.log(b[0].max,b[1].max,b[2].max,b[3].max)},1e3);$("#userWindow").click(function(){$("#userWindow").addClass("userWindowActive")});var T=window.innerWidth,N=window.innerHeight,C=45,k=T/N,L=.1,A=1e4,n=new THREE.WebGLRenderer,e=new THREE.PerspectiveCamera(C,k,L,A);e.position.set(0,600,0);var O=!0,t=new THREE.Scene,M=new Array,_=new Array,D=new Array,P=2500,H=0,B,F;setTimeout(function(){I();U();z();nt()},5e3)})();